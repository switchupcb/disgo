// Code generated by github.com/switchupcb/copygen
// DO NOT EDIT.
package requests

import (
	"strconv"

	json "github.com/goccy/go-json"
	"github.com/switchupcb/disgo/wrapper/pkg/http"
	"github.com/switchupcb/disgo/wrapper/resources"
)

const StatusOK = 200

// Send sends a EditGlobalApplicationCommand to Discord and returns a ApplicationCommand.
func (r *EditGlobalApplicationCommand) Send(bot Client) (*resources.ApplicationCommand, error) {
	// Use pre-defined edge cases for certain fields (if necessary),
	// to provide feedback to the client prior to a request being sent.
	// if else return

	// send the request.
	var result *resources.ApplicationCommand
	body, err := json.Marshal(r)
	if err != nil {
		return nil, err
	}

	err = http.SendRequestJSON(
		bot.client, bot.ctx, http.POST,
	    EndpointEditGlobalApplicationCommand(strconv.FormatUint(uint64(bot.ApplicationID), 10), strconv.FormatUint(uint64(r.CommandID), 10)),
        body,
    )

	// parse the response.
	if bot.ctx.Response.StatusCode() == StatusOK {
		err := json.Unmarshal(bot.ctx.Response.Body(), result)
		if err != nil {
			http.ReleaseResponse(bot.ctx)
			return nil, err
		}
	} else {
		err := HandleStatus(bot.ctx.Response.StatusCode())
		http.ReleaseResponse(bot.ctx)
		return nil, err
	}
	http.ReleaseResponse(bot.ctx)

	return result, nil
}

// Send command repeated for every request...
